@model IEnumerable<web.GrantPrimeV_1.Models.UserData.ApplicantData.ApplicantModel>
@{
    ViewBag.Title = "Approval2";
    Layout = "~/Views/Shared/_Ekiti_Layout.cshtml";
}

<section id="intro" class="intro">

    <div class="row">

        <div class="wow fadeInDown" data-wow-offset="0" data-wow-delay="0.1s">
            <div style="height:130px">

            </div>
        </div>
    </div>

</section>
<div class="container">
    <div class="row">


        @*<div class="col-md-10 col-md-offset-1">*@
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
            <div style="display:none;" class="alert alert-success alert-dismissible" id="succesdiv">
                <a href="#" class="close" data-dismiss="alert">&times;</a>
                <p>
                    <strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</strong><span id="sucessspan"></span>

                </p>
            </div>


            <div class="bs-example">

                @*<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="mdo">Open modal for mdo </button>
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="fat">Open modal for fat</button>
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="getbootstrap">Open modal for getbootstrap</button>*@

                <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                @*<h5 class="modal-title" id="exampleModalLabel">New message</h5>*@
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                @*<form>
                                        <div class="form-group">
                                            <label for="recipient-name" class="col-form-label">Recipient:</label>
                                            <input type="text" class="form-control" id="recipient-name">
                                        </div>
                                        <div class="form-group">
                                            <label for="message-text" class="col-form-label">Message:</label>
                                            <textarea class="form-control" id="message-text"></textarea>
                                        </div>
                                    </form>*@
                                <div class="row">

                                    <div class="col-md-12" id="IndivApp">
                                        <div class="card" id="assetDetails">
                                            <h5 class="card-header" style="background-color:blue;color:white">Applicant Information</h5>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Applicant Id:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblRegistrationId" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Surname:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblSurname" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">First Name:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblFirstName" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Middle Name:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblMiddlename" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Gender:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblgender" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">State of Origin:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblStateOfOrigin" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">LGA:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblLGA" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Resident Address:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblResidAddress" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Position:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblPostFunct" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Personal Tax Reg. No.:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblTaxReg" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Phone:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblPhone" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Email:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblEmail" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Business Sector:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblBusSector" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Business Type:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblBusType" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Business Address:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblBusAdress" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">City:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblCity" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">State:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblState" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Nationality:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblNationality" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Website:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblWebsitAdress" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Bisiness Phone:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblBusiPhone" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Business Email:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblBusiEmail" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Business Tax Reg. No:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblTaxRegNO" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Last Tax Receipt:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblTaxReceipt" style="color:blue;"><button class="btn-light" id="taxDownload">download</button></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Last Tax Pay Date:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblBussComDate" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Number of Yr. Inc.:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblNumYr" style="color:blue;"> </label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Bus. Reg. No:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblBusnRegNum" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Bus. Reg. Certificate:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="" style="color:blue;"><button class="btn-light" id="CACDownload">download</button></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Number of Employee:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblNOofEmp" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Number of Female:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblNOofFemale" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Number of Male:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblNOofMale" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Age Grade:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblAgeGrade" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Last 3 yrs Annual Turnover:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblTurnoverdnld" style="color:blue;"><button class="btn-light" id="TurnOverDownload">download</button></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Est. Value of Bus. Asset (excluding land & buildings):</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblBusinessAsset" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Evidence of Last 3 Years Expenses:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="" style="color:blue;"><button class="btn-light" id="DownloadExp">download</button></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Bank Name:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblBankName" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Account Number:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblAcctNo" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">BVN:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblBVN" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Rating:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblRating" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Running loan:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblRuninloan" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">payment Schedule:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblpaymSchedule" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Repayment change to how much?:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblpaymentChange" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Are you finding it difficult to meet payment obligation?</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblrepaymenobligation" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">business Impact:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblbussImpact" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">bus. Neg. Impact:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblbussNegImpact" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Are you planning to lay-off employee?:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblplantolayoff" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Number of Employee laid off:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblNoOfEmployeeLayOff" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Did business continue during Covid-19 Crisis?:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblDidBusContDuringCovidCrisis" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">If no, what tools could have made this possible?</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblCudHaveMadeItPoss" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">If yes, what tools could have made business operations more efficient during the crisis?</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblCudHaveMadeItEff" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Were your employees able to work from home during the crisis?</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblEmployeeAbleToWrkFrmHom" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">If no, what tools would be required to make this possible?</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblWhtToolCudVeReqToMakeItPosib" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Full Name:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblfullname" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">All sections of the application form have been filled in, where appropriate:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblAllSectnOfFormFilled" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">The business registration certificate is attached (registered business only):</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblIsBusinessCertAttach" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Evidence of Tax payment is attached:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblIsEvidOfTaxPaymentAttach" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Evidence of annual business turnover is attached for a formal business or verified for an informal business:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblIsEvOf1YrTOverAttachOrVerifid" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Bank details have been provided:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblVeBnkDetailProvided" style="color:blue;"></label></div>

                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6" style="font-weight:bold">Bank details have been provided:</div>
                                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="IsImpactOfCovidOnBusnVrfd" style="color:blue;"></label></div>

                                                </div>
                                                @*<div class="row">
                                                        <div class="col-md-6" style="font-weight:bold">business operation:</div>
                                                        <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblbussoperat" style="color:blue;"></label></div>

                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6" style="font-weight:bold">work from home:</div>
                                                        <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblworkfromhome" style="color:blue;"></label></div>

                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6" style="font-weight:bold">Grant request:</div>
                                                        <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblgrandrequest" style="color:blue;"></label></div>

                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6" style="font-weight:bold">Declareation:</div>
                                                        <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lbldeclareation" style="color:blue;"></label></div>

                                                    </div>*@
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="row">
                                    <div class="col-md-6" style="font-weight:bold">Amount requested:</div>
                                    <div class="col-md-6" style="background-color:antiquewhite"><label class="" id="lblAmountReguest" style="color:blue;"></label></div>

                                </div>
                                <div class="row">
                                    <div class="col-md-6" style="font-weight:bold">Amount Approved:</div>
                                    <div class="col-md-6" style="background-color:antiquewhite"><input class="form-control" id="AmountApprove" /> </div>
                                    @*<div class="col-md-6" style="background-color:antiquewhite">@Html.TextBox("AmountApprove", new { @class = "form-control", @id = "AmountApprove", @required = "required" })</div>*@

                                </div>

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label for="Address">Last Approval's Comment</label>
                                            @Html.TextArea("PrevComment", new { @class = "form-control", @id = "PrevComment", @readonly = "readonly" })
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label for="Address">Comment</label>
                                            @Html.TextArea("Comment", new { @class = "form-control", @id = "Comment", @required = "required" })
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <button class="btn btn-primary" id="Approve">Approve</button>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <button class="btn btn-secondary" id="Reject">Reject</button>
                                        </div>
                                    </div>
                                </div>




                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                @*<button type="button" class="btn btn-primary">Send message</button>*@
                            </div>
                        </div>
                    </div>
                </div>



                <div class="modal fancybox-animated" id="PictureModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel2" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel2">New message</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div id="pictureFrame" class="col-md-6 mb-5 mb-lg-0 position-relative">
                                    @*<img src="~/Content/consula/consula/images/about_1.jpg" class="img-fluid" alt="Image">*@
                                    <img id="ImageScr" src="" class="img-fluid" alt="Image" />

                                </div>








                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                @*<button type="button" class="btn btn-primary">Send message</button>*@
                            </div>
                        </div>
                    </div>
                </div>



                <div class="panel panel-default panel-table" id="maindiv">





                    <div class="panel-body" id="FormDiv">

                        <div class="alert alert-danger alert-dismissible" style="display:none;" id="errordiv">
                            <a href="#" class="close" data-dismiss="alert">&times;</a>
                            <strong>Error!&nbsp;&nbsp;</strong><span id="errorspan"></span>
                        </div>



                    </div>


                    <div class="panel-body" id="TableDivCSS">
                        <div class="panel-heading">
                            <div class="row">

                                <div class="col col-xs-6 text-left">
                                    <div>
                                        <h2 id="tile1">&nbsp;&nbsp;List of Applications waiting for approval</h2>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <br />
                        <div style="width: 100%; " id="TableDiv">


                            <table id="importTable1" class="display" style="width:100%;">

                                <thead>
                                    <tr>
                                        <th></th>
                                        <th id="FirstColumn"> Applicant ID</th>
                                        <th id="1">SurName</th>
                                        <th id="2">First Name </th>
                                        <th id="3">Other Name </th>
                                        <th id="3">Age </th>
                                        <th id="4">LGA </th>
                                        <th id="5">Tax ID</th>
                                        <th id="6">Last Paid</th>
                                        <th id="7">Yrs of operation</th>
                                        <th id="8">Gender</th>
                                        <th id="9">Business Sector</th>
                                        <th id="10">Amount</th>
                                        <th id="11">Rating</th>
                                        <th id="12">Business Asset</th>
                                        <th id="13">Applied Date</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>


                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

@section scripts{



    @Styles.Render("~/Content/EkitiCss")
    @Scripts.Render("~/Content/EkitiJs")




    <script language="javascript" type="text/javascript">
        jQuery.browser = {};
        (function () {
            jQuery.browser.msie = false;
            jQuery.browser.version = 0;
            if (navigator.userAgent.match(/MSIE ([0-9]+)\./)) {
                jQuery.browser.msie = true;
                jQuery.browser.version = RegExp.$1;
            }
        })();
        @*var imageUrl
            = "@Url.Action("GetPhoto")";
        var imgs = null;

        $(document).ready(function () {
            if ($.browser.msie) {
                var browserMsg
                    = "Your browser does not support Base64 image"

                alert(browserMsg);

                $("#taxDownload").attr("disabled", true);
            }

            var displayImage = function (base64Data) {
                $('#ImageScr').prop('src', base64Data + '?' + Math.random());

            };

            $("#taxDownload").click(function () {
                var regId1 = parseInt($('#lblRegistrationId').text());
                if (imgs != null) {
                    displayImage(imgs);
                    return;
                }
                debugger
                $.ajax({

                    url: imageUrl,
                    type: "GET",
                    data: {
                        id: regId1
                    },
                    contentType: "application/json; charset=utf-8",
                    datatype: JSON,
                    success: function (data) {
                        imgs = data;
                        displayImage(imgs);
                    },
                    error: function (xhr) {
                        alert("Error occurred while loading the image. "
                            + xhr.responseText);
                    }
                });
                $(this).attr("data-toggle", "modal").attr("data-target", "#PictureModal");
            });


        });*@
    </script>
    <script type="text/javascript">
        //function reload() {
        //    location.reload();
        //}
        var table;
        var RootUrl = "";
        function arrayBufferToBase64(buffer) {
            let binary = '';
            let bytes = new Uint8Array(buffer);
            let len = bytes.byteLength;
            for (let i = 0; i < len; i++) {
                binary += String.fromCharCode(bytes[i]);
            }
            return window.btoa(binary);
        }
    $(document).ready(function () {

        GetStatementRecords();
        $("#taxDownload").click(function () {
            //RootUrl = "/Applicant/DownloadTaxReceipt?";
            var regId = parseInt($('#lblRegistrationId').text());
            $.ajax(
                {
                    url: '@Url.Action("DownloadTaxReceipt", "Applicant")',
                    contentType: 'application/json; charset=utf-8',
                    datatype: 'json',
                    data: {
                        id: regId
                    },
                    type: "GET",
                    success: function () {
                        window.location = RootUrl + '/Applicant/DownloadTaxReceipt?id=' + regId;

                    }
                });
        });
        $("#TurnOverDownload").click(function () {
            //RootUrl = "/Applicant/DownloadTaxReceipt?";
            var regId = parseInt($('#lblRegistrationId').text());
            $.ajax(
                {
                    url: '@Url.Action("DownloadBusinessTurnOver", "Applicant")',
                    contentType: 'application/json; charset=utf-8',
                    datatype: 'json',
                    data: {
                        id: regId
                    },
                    type: "GET",
                    success: function () {
                        window.location = RootUrl + '/Applicant/DownloadBusinessTurnOver?id=' + regId;

                    }
                });
        });
                 $("#CACDownload").click(function () {
                //RootUrl = "/Applicant/DownloadTaxReceipt?";
             var regId = parseInt($('#lblRegistrationId').text());
            $.ajax(
            {
                url: '@Url.Action("DownloadCAC", "Applicant")',
                contentType: 'application/json; charset=utf-8',
                datatype: 'json',
                data: {
                    id: regId
                },
                type: "GET",
                    success: function () {
                        window.location = RootUrl + '/Applicant/DownloadCAC?id=' + regId;

                    }
            });

                 });
        $("#DownloadExp").click(function () {
                //RootUrl = "/Applicant/DownloadTaxReceipt?";
             var regId = parseInt($('#lblRegistrationId').text());
            $.ajax(
            {
                url: '@Url.Action("DownloadExpense", "Applicant")',
                contentType: 'application/json; charset=utf-8',
                datatype: 'json',
                data: {
                    id: regId
                },
                type: "GET",
                    success: function () {
                        window.location = RootUrl + '/Applicant/DownloadCAC?id=' + regId;

                    }
            });

                 });

            $('#importTable1 tbody').on('click', 'tr', function () {

                var data = table.row(this).data();
                AccountInfo(data[1])
                //e.preventDefault();
                $(this).attr("data-toggle", "modal").attr("data-target","#exampleModal");


            });

            $('#freshList').click(function (e) {
                var grantType = $('#grantType').val();
                if (grantType == "" || grantType == null) {

                    sweetAlert("please select grant type")
                    e.preventDefault();
                } else {
                    $('#importTable1').dataTable().fnDestroy();
                    GetStatementRecords(1, grantType);
                    $('#tile1').text("LIST OF FRESH APPLICANTS");
                }

            });
            $('#RejectedList').click(function (e) {
                var grantType = $('#grantType').val();
                if (grantType == "" || grantType == null) {
                    sweetAlert("please select grant type")
                    e.preventDefault();
                } else {
                    $('#importTable1').dataTable().fnDestroy();
                    GetStatementRecords(2, grantType);
                    $('#tile1').text("LIST OF REJECTED APPLICANTS");
                }


            });


            $('#Approve').click(function () {
                Approve();
            });
            $('#Reject').click(function () {
                Reject();
            });
    });

    function GetStatementRecords() {

        var url = '@Url.Action("GetApprovedAppLevel")';
        //var data={
        //    btn: btn
        //};
        $.ajax({
            url: url,
            type: "GET",
            data: {},
            contentType: "application/json; charset=utf-8",
            datatype: JSON,
            success: function (Data) {
                if (Data != null) {
                    var tr;
                    $('#importTable1 tbody').empty();
                    //Append each row to html table
                    //for (var i = 0; i < result.course.length; i++) {
                    var i = 0;
                    $.each(Data, function (index, item) {
                        tr = $('<tr/>');
                        tr.append('<td></td>');
                        tr.append('<td id="fisrtTd">' + item.applicant_Id+'</td>');
                        tr.append('<td id="a' + i + '">' + item.SurName + '</td>');
                        tr.append('<td id="b' + i + '">' + item.FirstName + '</td>');
                        tr.append('<td id="b' + i + '">' + item.Middlename + '</td>');
                        tr.append('<td id="b' + i + '">' + item.Age + '</td>');
                        tr.append('<td id="d' + i + '">' + item.LGA + '</td>');
                        tr.append('<td id="e' + i + '">' + item.BusinesTaxRegNo + '</td>');
                        tr.append('<td id="f' + i + '">' + Formatdate(item.LastTaxPayDate) + '</td>');
                        tr.append('<td id="g' + i + '">' + item.NoOfYrInOperation + '</td>');
                        tr.append('<td id="c' + i + '">' + item.gender + '</td>');
                        tr.append('<td id="i' + i + '">' + item.BusinessSector + '</td>');
                        tr.append('<td id="j' + i + '">' + addCommas(item.Amount) + '</td>');
                        tr.append('<td id="j' + i + '">' + item.Score + '</td>');
                        tr.append('<td id="j' + i + '">' + addCommas(item.EstimValOfBusTurnoverXLB) + '</td>');
                        tr.append('<td id="j' + i + '">' + Formatdate(item.createdate) + '</td>');

                        //tr.append('<td class="table-action">' +
                        //'<div class="dropdown float-right">' +
                        //    '<a href="#" class="dropdown-toggle arrow-none card-drop" data-toggle="dropdown" aria-expanded="false">' +
                        //    ' Actions<i class="mdi mdi-dots-vertical"></i></a>' +
                        //    '<div class="dropdown-menu dropdown-menu-right" style="">' +
                        //    '<a class="dropdown-item" id="btndetail" href="#" onclick="return AccountInfo(\'' + item.ID + '\')">' +
                        //    '<i class="la fa fa-eye"></i>' +
                        //    ' <span class="kt-nav__link-text">View Details</span></a>' +
                        //    ' </div>' +
                        //    ' </div>' +
                        //    '</td>');

                        $('table').append(tr);
                        i++;
                    });
                    //table = $('.display').DataTable({
                    table = $('#importTable1').DataTable({
                        columnDefs: [{
                            targets: 1, visible: false
                        }],
                        rowCallback: function (row, data, displayNum, displayIndex, dataIndex) {
                            $(row).attr('title', "Click to view details")
                        }
                        //"destroy": true,
                        //retrieve: true
                    });
                    //$('#importTable1').DataTable({
                    //    dom: 'Bfrtip',
                    //    buttons: [
                    //        'copy', 'csv', 'excel', 'pdf', 'print'
                    //    ],
                    //    retrieve: true,
                    //});

                    //$(document).ready(function () {
                    //    //var table = $('#importTable1').DataTable();


                    //});
                    $("#ListContainer").show();
                } else {
                    alert("No record found");
                }

            },
            error: function (data) { }
        });

    }

        function AccountInfo(id) {
            debugger
        var data = {
            id: id
           };
           var url = '@Url.Action("GetApplicantById")';
        $.ajax({
                 type: "GET",
                url: url,
                data: data,
                contentType: "application/json;charset=UTF-8",
                dataType: "json",
                success: function (res) {
                    if (res != null) {
                        //$("#formData").show();
                        $('#lblRegistrationId').text(res.applicant_Id);
                        $('#lblSurname').text(res.SurName);
                        $('#lblFirstName').text(res.FirstName);
                        $('#lblMiddlename').text(res.Middlename);
                        $('#lblgender').text(res.gender);
                        $('#lblStateOfOrigin').text(res.StateOfOrigin);
                        $('#lblLGA').text(res.LGA);
                        $('#lblResidAddress').text(res.ResidAddress);
                        $('#lblPostFunct').text(res.Position);
                        $('#lblTaxReg').text(res.PersonalTaxRegNo);
                        $('#lblPhone').text(res.Mobile);
                        $('#lblEmail').text(res.Email);
                        $('#lblBusSector').text(res.BusinessSector);
                        $('#lblBusType').text(res.BusinessType);
                        $('#lblBusAdress').text(res.BusinessAddress);
                        $('#lblCity').text(res.City);
                        $('#lblState').text(res.State);
                        $('#lblNationality').text(res.Country);
                        $('#lblBusiPhone').text(res.BusinesPhoneNo);
                        $('#lblBusiEmail').text(res.BusinesEmail);
                        $('#lblBusnRegNum').text(res.BusnRegNum);
                        $('#lblWebsitAdress').text(res.WebsitAdress);
                        $('#lblTaxRegNO').text(res.BusinesTaxRegNo);
                        $('#lblBussComDate').text(Formatdate(res.LastTaxPayDate));
                        $('#lblNumYr').text(res.NoOfYrInOperation);
                        $('#lblNOofEmp').text(res.NOofEmployee);
                        $('#lblNOofFemale').text(res.NOofFemale);
                        $('#lblNOofMale').text(res.NOofMale);
                        //$('#lblAgeGrade').text(res.AgeGrade);
                        $('#lblBankName').text(res.BankName);
                        $('#lblAcctNo').text(res.AcctNo);
                        $('#lblBVN').text(res.BVN);
                        $('#lblBusinessAsset').text(res.EstimValOfBusTurnoverXLB);
                        $('#lblRuninloan').text(res.TotalOutstandVolumeOfLoan);
                        $('#lblpaymSchedule').text(res.HowOftenWereYouPaying);
                        $('#lblAmountPaid').text(res.HowMuchWereyouPaying);
                        $('#lblpaymentChange').text(res.RepaymntChangeToHowMuch);
                        $('#lblrepaymenobligation').text(res.findItDiffToMeetPaymentOblig);
                        $('#lblbussImpact').text(res.BusinImpactByCovid);
                        $('#lblbussNegImpact').text(res.BusiNegImpactByCovid);
                        $('#lblplantolayoff').text(res.PlanningToLayOffEmployeeDueToNeg);
                        $('#lblNoOfEmployeeLayOff').text(res.DidYouLayOffEmployee);
                        $('#lblDidBusContDuringCovidCrisis').text(res.DidBusContDuringCovidCrisis);
                        $('#lblCudHaveMadeItPoss').text(res.WhtToolCudVeMadeItPosib);
                        $('#lblCudHaveMadeItEff').text(res.WhtToolCudVeMadeBusMoreEffnt);
                        $('#lblEmployeeAbleToWrkFrmHom').text(res.EmployeeAbleToWrkFrmHom);
                        $('#lblWhtToolCudVeReqToMakeItPosib').text(res.WhtToolCudVeReqToMakeItPosib);
                        $('#lblfullname').text(res.fullname);
                        $('#lblAllSectnOfFormFilled').text(res.AllSectnOfFormFilled);
                        $('#lblIsBusinessCertAttach').text(res.IsBusinessCertAttach);
                        $('#lblIsEvidOfTaxPaymentAttach').text(res.IsEvidOfTaxPaymentAttach);
                        $('#lblIsEvOf1YrTOverAttachOrVerifid').text(res.IsEvOf1YrTOverAttachOrVerifid);
                        $('#lblVeBnkDetailProvided').text(res.VeBnkDetailProvided);
                        $('#lbl IsImpactOfCovidOnBusnVrfd').text(res.IsImpactOfCovidOnBusnVrfd);
                        $('#lblAmountReguest').text(res.Amount);
                        $('#PrevComment').val(res.approveComment);
                        //$('#grandrequest').text(res.grandrequest);
                        //$('#declareation').text(res.declareation);



                    } else {
                          //$("#formData").hide();
                        alert("Account Number does not exist");

                    }
                },
                error: function (result) {
                    alert("Error" + result.responseText);
                }
            });

        }

    function Approve() {

        var regId = $('#lblRegistrationId').text();
        var comment = $('#Comment').val();
        if (comment == '') {
            alert("please Enter Comment");
            return false;
        } else {
 var approveAmount = parseFloat($('#lblAmountReguest').text()).toFixed(2);
        var actionType = 0;
        $('input[name="actionType"]:checked').each(function () {
            actionType = $(this).val();
        });
        var model = {
            applicant_Id: regId,
            approveAmount: approveAmount,
            ApproveComment: comment,
            approveType: actionType
           };
           var url = '@Url.Action("Approve")';
        $.ajax({
                 type: "GET",
                url: url,
            data: model,
                contentType: "application/json;charset=UTF-8",
                dataType: "json",
                success: function (res) {
                    if (res.retVal != null) {
                        //sweetAlert(res.retmsg);


                        //swal({
                        //    title: "Approved!",
                        //    text: res.retmsg,
                        //    icon: "success",
                        //    button: "Ok",
                        //});
                        //location.reload(true);
                        swal.fire({
                            title: "Approved!",
                            text: res.retmsg,
                            icon: "success",
                            buttons: ["","OK"],
                            dangerMode: true,
                        })
                            .then((willDelete) => {
                                if (willDelete) {


                                    //swal("Poof! This application has been rejected permanently", {
                                    //    icon: "success",
                                    //    className: "reloadBtn",
                                    //});

                                    location.reload();
                                } else {
                                    //swal("This application has been forwarded to Enumerator for correction", {
                                    //    className: "reloadBtn",
                                    //});
                                    location.reload();
                                }
                            });
                    } else {
                        //sweetAlert("Account Number does not exist");
                        swal.fire("Good job!", "Account Number does not exist!", "success");
                    }
                },
                error: function (result) {
                    sweetAlert("Error" + result.responseText);
                }
            });
        }


    }
    function Reject() {

        var regId = $('#lblRegistrationId').text();
        var comment = $('#Comment').val();
        if (comment == '') {
            alert("Please enter comment");
            return false;
        } else {
  var rejectAmount = parseFloat($('#lblAmountReguest').text()).toFixed(2);
        var actionType = 0;
        $('input[name="actionType"]:checked').each(function () {
            actionType = $(this).val();
        });



        //actionType = 0;
        //location.reload(true);
            Swal.fire({
                title: 'Do you want to reject it parmanently?',
                showDenyButton: true,
                showCancelButton: true,
                confirmButtonText: `YES`,
                denyButtonText: `NO`,
            }).then((result) => {
                /* Read more about isConfirmed, isDenied below */
                if (result.isConfirmed) {
                    //Swal.fire('Saved!', '', 'success')
                                  actionType = 1;
                               var model = {
            applicant_Id: regId,
            rejectAmount: rejectAmount,
            rejectComment: comment,
            rejectType: actionType
        };
        var url = '@Url.Action("Reject")';
                $.ajax({
                    type: "GET",
                    url: url,
                    data: model,
                    contentType: "application/json;charset=UTF-8",
                    dataType: "json",
                    success: function (res) {
                        if (res.retVal != null) {
                            swal.fire({
                                title: "Rejected!",
                                text: "Poof! This application has been rejected permanently",
                                icon: "warning",
                                buttons: ["", "OK"],
                                dangerMode: true,
                            })
                                .then((willDelete) => {
                                    if (willDelete) {


                                        //swal("Poof! This application has been rejected permanently", {
                                        //    icon: "success",
                                        //    className: "reloadBtn",
                                        //});

                                        location.reload();
                                    } else {
                                        //swal("This application has been forwarded to Enumerator for correction", {
                                        //    className: "reloadBtn",
                                        //});
                                        location.reload();
                                    }
                                });

                        } else {
                            sweetAlert("Account Number does not exist");
                        }
                    },
                    error: function (result) {
                        alert("Error" + result.responseText);
                    }
                });

                    //swal("Poof! This application has been rejected permanently", {
                    //    icon: "success",
                    //});


                } else if (result.isDenied) {
                    //Swal.fire('Changes are not saved', '', 'info')
                                           actionType = 0;
                               var model = {
            applicant_Id: regId,
            rejectAmount: rejectAmount,
            rejectComment: comment,
            rejectType: actionType
        };
        var url = '@Url.Action("Reject")';
                $.ajax({
                    type: "GET",
                    url: url,
                    data: model,
                    contentType: "application/json;charset=UTF-8",
                    dataType: "json",
                    success: function (res) {
                        if (res.retVal != null) {
                            swal.fire({
                                title: "Rejected!",
                                text: "This application has been forwarded to Enumerator for correction",
                                icon: "warning",
                                buttons: ["", "OK"],
                                dangerMode: true,
                            })
                                .then((willDelete) => {
                                    if (willDelete) {


                                        //swal("Poof! This application has been rejected permanently", {
                                        //    icon: "success",
                                        //    className: "reloadBtn",
                                        //});

                                        location.reload();
                                    } else {
                                        //swal("This application has been forwarded to Enumerator for correction", {
                                        //    className: "reloadBtn",
                                        //});
                                        location.reload();
                                    }
                                });

                        } else {
                            alert("Account Number does not exist");
                        }
                    },
                    error: function (result) {
                        sweetAlert("Error" + result.responseText);
                    }
                });
                  
                }
            })


        }

        }

    function Formatdate(Jsondate) {
        if (Jsondate == null || Jsondate == '') {
            return Jsondate;
        }
        else {
            var mydate = new Date(eval('new' + Jsondate.replace(/\//g, ' ')));
            var month = mydate.getMonth() + 1;
            var day = mydate.getDate();
            var year = mydate.getFullYear();
            var date = day + "/" + month + "/" + year;
            return date;
        }

    }
    function addCommas(nStr) {
        nStr += '';
        x = nStr.split('.');
        x1 = x[0];
        x2 = x.length > 1 ? '.' + x[1] : '';
        var rgx = /(\d+)(\d{3})/;
        while (rgx.test(x1)) {
            x1 = x1.replace(rgx, '$1' + ',' + '$2');
        }
        return x1 + x2;
    }
    </script>

}
<style>


    table.dataTable.select tbody tr,
    table.dataTable thead th:first-child {
        cursor: pointer;
    }

    #header {
        padding: 0px 0 !important;
        background-color: rgba(0,0,0,0.8) !important;
    }

        #header.fixedwrap {
            background-color: rgba(0,0,0,0.8) !important;
        }

    /*#TableDiv {
                overflow-x: scroll;


        /*background-color:#475;*/
    /*overflow:scroll;*/


    #importTableCSS, #ExtractTableCSS {
        overflow-x: scroll;
        margin-bottom: 3em;
        height: 900px;
        display: block;
    }

    div.dataTables_wrapper {
        margin-bottom: 3em;
    }


    .popup-overlay {
        visibility: hidden;
    }

    .popup-content {
        visibility: hidden;
    }

    .bs-example {
        margin: 20px;
    }

    #TableDiv, #IndivApp {
        overflow-x: scroll;
        margin-bottom: 3em;
        height: auto;
        display: block;
    }

    #FirstColumn, #fisrtTd {
        display: none;
    }

    .container {
        margin: auto;
        width: 80%;
        border: 5px solid #FFFF00;
        padding: 10px;
    }

    .bs-example {
        max-width: 100%;
    }
</style>



